<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Medico — Create account</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>

    <main class="auth signup">
      <div class="auth-container">
        <div class="auth-left">
          <div class="auth-logo">
            <svg class="logo" width="36" height="36" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden>
              <rect rx="6" width="24" height="24" fill="#16a085" />
              <path d="M7 12h10M12 7v10" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <span class="brand">Medico</span>
          </div>
          <div class="auth-inner">
            <h2>Create your account</h2>
            <p class="muted">Fill in the details to get started</p>

            <form id="signup-form" class="auth-form">
              <label>Username
                <input type="text" name="username" placeholder="Choose a username" required />
              </label>

              <label>Phone Number
                <input type="tel" name="phone" placeholder="10-digit mobile number" required />
              </label>

              <label>Password
                <input type="password" name="password" placeholder="Create a password" required />
              </label>

              <label>Confirm Password
                <input type="password" name="password2" placeholder="Confirm password" required />
              </label>

              <button class="btn-primary" type="submit">Create account</button>
            </form>

            <p class="muted">Already have an account? <a href="login.html">Sign in</a></p>
          </div>
        </div>
        <div class="auth-right">
          <h3>Join Medico Today</h3>
          <p>Experience autonomous pharmacy management powered by AI</p>
        </div>
      </div>
    </main>

    <footer class="site-footer"><div class="page-inner">© Medico</div></footer>

    <script>
      // simple client-side signup: validate and store users in localStorage
      document.getElementById('signup-form').addEventListener('submit', function(e){
        e.preventDefault();
        const f = e.target;
        const username = f.username.value.trim();
        const phone = f.phone.value.trim();
        const pw = f.password.value;
        const pw2 = f.password2.value;
        if(!username || !phone || !pw) return alert('Please complete all fields');
        if(!/^\d{10}$/.test(phone)) return alert('Please enter a valid 10-digit phone number');
        if(pw !== pw2) return alert('Passwords do not match');
        const users = JSON.parse(localStorage.getItem('cureos_users') || '[]');
        if(users.some(u => u.username?.toLowerCase() === username.toLowerCase())) {
          return alert('Username already exists. Please choose another one.');
        }
        if(users.some(u => u.phone === phone)) {
          return alert('Phone number already registered.');
        }

        const newUser = { username, phone, password: pw };
        users.push(newUser);
        localStorage.setItem('cureos_users', JSON.stringify(users));
        localStorage.setItem('cureos_user', JSON.stringify(newUser));
        localStorage.setItem('pharma_logged_in', 'true');
        localStorage.setItem('pharma_username', username);
        localStorage.setItem('pharma_clear_chat', 'true');
        window.location.href = 'dashboard.html';
      });
    </script>
  </body>
</html>
